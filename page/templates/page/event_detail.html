{% extends 'rally_nicaragua/base.html' %}
{% load breadcrumbs %}
{% load static %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="{% static 'page/js/favorite.js' %}"></script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  });
</script>
{% endblock %}

{% block content %}
{% render_breadcrumb %}

<div class="min-h-screen bg-white text-gray-800">
  <div class="container mx-auto px-4 py-8 max-w-7xl">

    <article class="bg-white p-8 rounded-lg shadow-md border border-gray-200 mb-12">
      <!-- Título -->
      <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4 text-center md:text-left">
        {{ event.title }}
      </h1>

      <!-- Botón de favorito -->
      {% if user.is_authenticated %}
      <div class="flex justify-center md:justify-start mb-6">
        <button id="favorite-btn"
          class="inline-flex items-center px-6 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700 shadow-md transition-all duration-300 transform hover:scale-105"
          data-url="{{ request.path }}" data-title="{{ event.title }}">
          <i data-lucide="heart" class="w-5 h-5 mr-2"></i>
          <span>Agregar a Favoritos</span>
        </button>
      </div>
      {% endif %}

      <!-- Imagen -->
      {% if event.image %}
      <div class="my-6 rounded-lg overflow-hidden shadow-lg border border-gray-200">
        <img src="{{ event.image.url }}" alt="Imagen de {{ event.title }}"
          class="w-full h-auto max-h-[500px] object-cover">
      </div>
      {% endif %}

      <!-- Fecha del evento -->
      <p class="text-sm text-gray-500 mb-4">Fecha del evento: {{ event.date|date:"d/m/Y" }}</p>

      <!-- Resumen del evento -->
      <div class="prose text-justify prose-lg max-w-none mt-4 text-gray-700 leading-relaxed">
        {{ event.summary|linebreaks }}
      </div>
    </article>

  </div>
</div>
{% endblock %}
