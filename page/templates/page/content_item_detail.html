{% extends 'rally_nicaragua/base.html' %}
{% load breadcrumbs %}
{% load static %}
{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

{% if user.is_authenticated %}
<script src="{% static 'page/js/favorite.js' %}"></script>
{% endif %}

<script>
  document.addEventListener("DOMContentLoaded", function () {
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }
  });
</script>
{% endblock %}
{% block content %}
<!-- Barra de direcciones (minimalista) -->
{% render_breadcrumb %}


<div class="min-h-screen bg-white text-gray-800">
  <div class="container mx-auto px-4 py-8 max-w-7xl">

    <article class="bg-white p-8 rounded-lg shadow-md border border-gray-200 mb-12">
      <!-- Título del ítem -->
      <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-4 text-center md:text-left">
        {{ item.title }}
      </h1>

      <!-- Botón de Favorito -->
      {% if user.is_authenticated %}
      <button id="favorite-btn" data-url="{{ request.path }}" data-title="{{ item.title }}"
        class="inline-flex items-center px-6 py-2 rounded-xl text-white bg-blue-600 hover:bg-blue-700 shadow-md transition-all duration-300 transform hover:scale-105 mx-auto md:mx-0">
        <i data-lucide="heart" class="w-5 h-5 mr-2"></i>
        <span class="btn-text">Agregar a Favoritos</span>
      </button>
      {% endif %}

      <!-- Imagen principal del ítem -->
      {% if item.image %}
      <div class="my-6 rounded-lg overflow-hidden shadow-lg border border-gray-200">
        <img src="{{ item.image.url }}" alt="Imagen de {{ item.title }}"
          class="w-full h-auto max-h-[500px] object-cover">
      </div>
      {% endif %}

      <!-- Cuerpo del contenido -->
      <div class="text-justify prose prose-lg max-w-none mt-8 text-gray-700 leading-relaxed">
        {{ item.body|safe }}
      </div>
    </article>

    <!-- Sección de Información Clave (Contenido General/Ejemplo) -->
    <section class="mb-12 bg-white p-8 rounded-lg shadow-md border border-gray-200">
      <h3 class="text-3xl font-bold text-gray-900 text-center mb-8">Información Clave</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="flex items-start gap-4 p-4 rounded-lg bg-gray-50 border border-gray-200 shadow-sm">
          <i data-lucide="map-pin" class="w-6 h-6 text-blue-600 flex-shrink-0 mt-1"></i>
          <div>
            <h4 class="text-lg font-semibold text-gray-900">Ubicación</h4>
            <p class="text-gray-700 text-sm">
              {{ item.location }}
            </p>
          </div>
        </div>
        <div class="flex items-start gap-4 p-4 rounded-lg bg-gray-50 border border-gray-200 shadow-sm">
          <i data-lucide="tag" class="w-6 h-6 text-green-600 flex-shrink-0 mt-1"></i>
          <div>
            <h4 class="text-lg font-semibold text-gray-900">Categoría</h4>
            <p class="text-gray-700 text-sm">
              {{ item.category.name }}
              <!-- Sitio Histórico -->
            </p>
          </div>
        </div>
        <div class="flex items-start gap-4 p-4 rounded-lg bg-gray-50 border border-gray-200 shadow-sm">
          <i data-lucide="clock" class="w-6 h-6 text-orange-600 flex-shrink-0 mt-1"></i>
          <div>
            <h4 class="text-lg font-semibold text-gray-900">Horario</h4>
            <p class="text-gray-700 text-sm">
              {{ item.schedule }}

            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- otros posibles intereses -->
    {% if otros_items %}
    <section class="mb-12">
      <h3 class="text-3xl font-bold text-gray-900 text-center mb-8">
        Otros Lugares de Interés Cercanos
      </h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for lugar in otros_items %}
        <a href="{{ lugar.get_absolute_url }}"
          class="block relative group rounded-lg overflow-hidden shadow-md border border-gray-200 transform hover:scale-[1.02] transition-transform duration-300">
          <img src="{{ lugar.image.url }}" alt="{{ lugar.title }}"
            class="w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105" />
          <div class="p-4 bg-white">
            <h4 class="text-lg font-semibold text-gray-900 mb-1">{{ lugar.title }}</h4>
            <p class="text-gray-700 text-sm">{{ lugar.description|truncatewords:15 }}</p>
          </div>
        </a>
        {% endfor %}
      </div>
    </section>
    {% endif %}


    <!-- Call to Action Final -->
    <section class="text-center bg-blue-600 p-12 rounded-lg shadow-xl mb-12">
      <h3 class="text-3xl lg:text-4xl font-bold text-white mb-6">¿Listo para tu Aventura en Nicaragua?</h3>
      <p class="text-xl text-blue-100 max-w-2xl mx-auto mb-8">
        Continúa explorando los maravillosos destinos que nuestro país tiene para ofrecer.
      </p>
      <a href="{% url 'home-maps' %}"
        class="inline-flex items-center bg-white text-blue-600 hover:bg-gray-100 px-8 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105">
        <i data-lucide="plane" class="w-5 h-5 mr-2"></i>
        <span>Ver Todos los Destinos</span>
      </a>
    </section>

  </div>
</div>
{% endblock %}