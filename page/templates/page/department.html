{% extends 'rally_nicaragua/base.html' %}
{% load breadcrumbs %}
{% load static %}

{% block scripts %}
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="{% static 'page/js/favorite.js' %}"></script>
{% endblock %}

{% block content %}

  {% render_breadcrumb %}

  {% if user.is_authenticated %}
    <button id="favorite-btn"
            class="mx-4 px-4 py-2 rounded text-white bg-blue-700 transition"
            data-url="{{ request.path }}"
            data-title="{{ department.name }}">
      Agregar favorito
    </button>
  {% endif %}

  <div class="container mx-auto px-4 py-8 max-w-3xl">

    {% if department %}
      <h2 class="text-3xl font-extrabold text-gray-900 mb-4">
        Departamento: {{ department.name }}
      </h2>

      {% if department.description %}
        <p class="text-lg text-gray-700 leading-relaxed mb-6">
          {{ department.description }}
        </p>
      {% endif %}

      {% if municipalities %}
        <h3 class="text-2xl font-semibold text-gray-800 mb-4">Municipios:</h3>
        <ul class="space-y-2 list-disc pl-6">
          {% for muni in municipalities %}
            <li>
              <a href="{% url 'municipality-detail' municipality_slug=muni.slug %}"
                 class="text-blue-600 hover:text-blue-800 hover:underline transition-colors duration-200">
                {{ muni.name }}
              </a>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="text-gray-600 italic">No hay municipios disponibles para este departamento.</p>
      {% endif %}
    
    {% else %}
      <p class="text-gray-600 italic">No se encontr√≥ el departamento solicitado.</p>
    {% endif %}
  
  </div>

{% endblock %}
